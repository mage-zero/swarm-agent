{
  "version": "0.4.40",
  "date": "2026-02-19",
  "summary": "Reconcile ProxySQL query rules during deploy so Magento search temporary table queries stay on writer and storefront search does not fail",
  "requires": {
    "cloud-swarm": ">=1.0.7",
    "mz-control": ">=1.0.9"
  },
  "changes": [
    {
      "id": "deploy-proxysql-search-tmp-routing-reconcile",
      "description": "Deploy worker now enforces managed ProxySQL query rules before app rollout, including routing search_tmp_ queries to writer hostgroup and keeping generic SELECT on reader hostgroup. This backfills environments where proxysql runtime rules drifted from template defaults.",
      "phase": "post_migrate",
      "downtimeMinutes": 0,
      "scope": "environment"
    }
  ]
}
